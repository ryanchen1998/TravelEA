@import play.mvc.Http.Request
@import helper._

@(user: models.User)

@scripts = {
    <script src="@routes.Assets.at("javascripts/treasureHunt.js")" type="text/javascript"></script>
    <script src="@controllers.backend.routes.TreasureHuntController.treasureHuntRoutes()" type="text/javascript"></script>
    <script src="@controllers.backend.routes.DestinationController.destinationRoutes()" type="text/javascript"></script>
}

@layouts.imageHeader("Treasure Hunts", user, "images/treasureHunt.jpg", scripts){

    <head>
        @* Imports MBBootstrap Datatables CSS. *@
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/datatables.min.css")">
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/bootstrap.min.css")">
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/main.css")">
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/treasure.css")">
    </head>

    <body>
        <div class="container">
            <span class="section-title">My Hunts</span>
            <a class="button-secondary" id="add-treasure-hunt-button" >
                <span class="profile-button" style="float: right; padding-left:10px;">Create New Hunt</span>
            </a>
            @* My destinations table *@
            <div>
                <table id="myTreasure" class="table table-hover table-bordered" cellspacing="0" width="100%">
                    <thead>
                        <tr>
                            <th class="th-sm">Riddle</th>
                            <th class="th-sm">Answer</th>
                            <th class="th-sm">Start Date</th>
                            <th class="th-sm">End Date</th>
                        </tr>
                    </thead>
                    <tbody id="destinationList">
                    </tbody>
                </table>
            </div>
        </div>

        <div class="container">
            <span class="section-title">All Hunts</span>
            @* All destinations table *@
            <div>
                <table id="allTreasure" class="table table-hover table-bordered" cellspacing="0" width="100%">
                    <thead>
                        <tr>
                            <th class="th-sm">Riddle</th>
                            <th class="th-sm">Start Date</th>
                            <th class="th-sm">End Date</th>
                        </tr>
                    </thead>
                    <tbody id="destinationList">
                    </tbody>
                </table>
            </div>
        </div>

        @* Create Treasure Hunt Modal *@
        <div class="modal fade" id="createTreasureHuntModal" tabindex="-1" role="dialog" data-show="true" aria-labelledby="modalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header text-center">
                        <h4 class="modal-title w-100 font-weight-bold">Create a Treasure Hunt</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">Ã—</span>
                        </button>
                    </div>
                    <form id="addTreasureHuntForm">
                        <div class="modal-body mx-3">
                            <div>Riddle
                                <em class="fas prefix grey-text"></em>
                                <input type="text" name="riddle" class="form-control validate" required>
                                <label id="riddleError" class="error-messages"></label>
                            </div>

                            <div>Answer
                                <em class="fas prefix grey-text"></em>
                                <select name="destinationId" id="destinationDropDown" class="form-control validate" required></select>
                                <label id="destinationError" class="error-messages"></label>
                            </div>

                            <div>Start Date
                                <em class="fas prefix grey-text"></em>
                                <input type="date" size="8" name="startDate" class="form-control validate" required>
                                <label id="startDateError" class="error-messages"></label>
                            </div>

                            <div>End Date
                                <em class="fas prefix grey-text"></em>
                                <input type="date" name="endDate" class="form-control validate" required>
                                <label id="endDateError" class="error-messages"></label>
                            </div>
                        </div>
                    </form>
                    <div class="modal-footer d-flex justify-content-center">
                        <button class="btn btn-popup waves-effect waves-light" data-toggle="modal" data-target="#createTreasureHuntModal">
                            Cancel<em class="fas fa-paper-plane-o ml-1"></em>
                        </button>
                        <button class="btn btn-popup" onclick=
                        'addTreasureHunt(
                                "@controllers.backend.routes.TreasureHuntController.insertTreasureHunt()",
                                "@controllers.frontend.routes.ApplicationController.home()", @user.id)'>
                            Create
                        </button>
                        <label id="otherError"></label>
                    </div>
                </div>
            </div>
        </div>
    </body>
}

<script type="text/javascript">
    onTreasureHuntPageLoad(@user.id);
</script>