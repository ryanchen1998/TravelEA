@import play.mvc.Http.Request
@import models.User
@(user: User, users: List[models.User])

@scripts = {
    <script src="@routes.Assets.at("javascripts/admin.js")" type="text/javascript"></script>
}

@layouts.main("Admin", user, scripts) {

    <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/admin.css")">

    <div class="pl-5">
        <div class="col-md-11">
            <h3>Users</h3>
            <label class="error-messages" id="adminError"></label>
            <table id="dtUser" class="table table-striped table-bordered" cellspacing="0" width="100%">
                <thead>
                    <tr>
                        <th class="th-sm">Id</th>
                        <th class="th-sm">Username</th>
                        <th class="th-sm">Admin</th>
                        <th class="th-sm">Delete User</th>
                    </tr>
                </thead>
                <tbody>
                    @* Populate the table with a list of profile details *@
                    @for(otherUser <- users){
                        @if(otherUser.id != user.id) {
                            <tr>
                                <td>@otherUser.id</td>
                                <td>@otherUser.username</td>
                                <td>
                                    @if(otherUser.username == "admin@travelea.co.nz") {
                                        Master
                                    } else {
                                        <button class="btn btn-secondary" onclick="toggleAdmin('@controllers.backend.routes.AdminController.revokeAdmin(otherUser.id)', '@controllers.backend.routes.AdminController.grantAdmin(otherUser.id)', this)">
                                            @if(otherUser.admin) {
                                                Revoke admin
                                            } else {
                                                Grant admin
                                            }
                                        </button>
                                    }
                                </td>
                                <td>
                                    @if(otherUser.username == "admin@travelea.co.nz") {
                                        Master
                                    } else {
                                        <button class="btn btn-danger">
                                            Delete
                                        </button>
                                    }
                                </td>
                            </tr>
                        }
                    }
                </tbody>
            </table>
        </div>
    </div>

    <div id="startchange"></div>
}