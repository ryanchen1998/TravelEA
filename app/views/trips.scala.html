@import play.mvc.Http.Request
@import helper._

@(user: String, tripList: Seq[models.Trip])(implicit request: Request, messages: play.i18n.Messages)

@scripts = {
    <script src="@routes.Assets.at("javascripts/trips.js")" type="text/javascript"></script>
}

@layouts.imageHeader("Trips", user, "images/trips-bg.jpg", scripts){

    <head>
        @* Imports MBBootstrap Datatables CSS. *@
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/datatables.min.css")">
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/bootstrap.min.css")">
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/main.css")">
    </head>

    <body>
        <div class="container">
            <div class="text-center">
                <a class="btn btn-primary" href="/trips/create" role="button">Create New Trip</a>
            </div><br>

            <div>
                <label id="tripError"></label>
                <table id="dtTrips" class="table table-striped table-bordered" cellspacing="0" width="100%">
                    <thead>
                        <tr>
                            <th class="th-sm">Start Destination</th>
                            <th class="th-sm">End Destination</th>
                            <th class="th-sm">Trip Length</th>
                            <th class="th-sm">Date</th>
                        </tr>
                    </thead>
                    <tbody id="tripData">
                        @for(t <- tripList) {
                            <tr id=@t.id>
                                <td id="startDestination">@t.tripDataList(0).destination.name</td>
                                <td id="endDestination">loading...</td>

                                @*if(t.tripDataList.length >= 2) {*@
                                    @*<td>@t.tripDataList(2).destination.name</td>*@
                                @*} else{*@
                                    @*<td>-</td>*@
                                @*}*@

                                <td>@t.tripDataList.length</td>
                                <td id="tripDate">----/--/--</td>
                                <td><button class="btn btn-popup" type="button" onclick='@controllers.frontend.routes.TripController.editTripIndex(t.id)'>View</button></td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </body>
}

<script type="text/javascript">
        getUserTrips("@controllers.backend.routes.TripController.getAllUserTrips()");
</script>