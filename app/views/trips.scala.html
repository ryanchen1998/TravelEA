@import play.mvc.Http.Request
@import helper._

@(user: String, tripList: Seq[models.Trip])

@scripts = {
    <script src="@routes.Assets.at("javascripts/trips.js")" type="text/javascript"></script>
}

@layouts.imageHeader("Trips", user, "images/trips-bg.jpg", scripts){

    <head>
        @* Imports MBBootstrap Datatables CSS. *@
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/datatables.min.css")">
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/bootstrap.min.css")">
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/main.css")">
    </head>

    <body>
        <div class="container">
            <div class="text-center">
                <a class="btn btn-primary" href="/trips/create" role="button">Create New Trip</a>
            </div><br>

            <div>
                <label id="tripError"></label>
                <table id="dtTrips" class="table table-striped table-bordered" cellspacing="0" width="100%">
                    <thead>
                        <tr>
                            <th class="th-sm">Start Destination</th>
                            <th class="th-sm">End Destination</th>
                            <th class="th-sm">Trip Length</th>
                            <th class="th-sm">Date</th>
                        </tr>
                    </thead>
                    <tbody id="tripData">
                        @for(t <- tripList) {
                            @if(t.tripDataList.length > 0) {
                                <tr id=@t.id>
                                    <td>@t.tripDataList(0).destination.name</td>

                                    @if(t.tripDataList.length >= 2) {
                                        <td>@t.tripDataList(t.tripDataList.length - 1).destination.name</td>
                                    } else{
                                        <td>-</td>
                                    }

                                    <td>@t.tripDataList.length</td>

                                    @if(t.findFirstTripDate() != null) {
                                        <td>@t.findFirstTripDate()</td>
                                    } else{
                                        <td>No Date</td>
                                    }

                                    <td><button class="btn btn-popup" type="button" onclick='viewTrip("@controllers.frontend.routes.TripController.editTripIndex(t.id)")'>View</button></td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </body>
}