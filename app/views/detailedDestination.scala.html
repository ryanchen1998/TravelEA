@import play.mvc.Http.Request
@(destinationId: Long, loggedUser: models.User, canModify: Boolean)

@scripts = {
    <script src="@routes.Assets.at("javascripts/detailedDestination.js")" type="text/javascript"></script>
    <script src="@routes.Assets.at("javascripts/common/baguetteBox.min.js")" type="text/javascript"></script>
    <script src="@routes.Assets.at("javascripts/common/jquery.bootpag.min.js")" type="text/javascript"></script>
    <script src="@controllers.backend.routes.PhotoController.photoRoutes()" type="text/javascript"></script>
    <script src="@controllers.backend.routes.DestinationController.destinationRoutes()" type="text/javascript"></script>
    <script src="@controllers.backend.routes.ProfileController.profileRoutes()" type="text/javascript"></script>
}

@layouts.main("Destination", loggedUser, scripts){
    <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/detailedDestination.css")">
    <link rel="stylesheet" href="@routes.Assets.at("stylesheets/baguetteBox.min.css")">
    <link rel="stylesheet" href="@routes.Assets.at("stylesheets/gallery-grid.css")">

    @* The custom title section with background image *@
    <div class="title-frame" id="title-frame">
        <div class="title-bg" style="background-image: url(@routes.Assets.at("images/detailedDestination-bg.jpg"))">
            <div class="title-text-wrap">
                <p id="summary_name" class="title-text"></p>
            </div>
        </div>
    </div>

    <body style="margin:auto">
        <div class="row destination" id="startchange">
            <div class="col-12 col-md-3">
                @* Destination Details *@
                <div id="destination-summary">
                    <div class="destination-details">
                        <p class="heading" id="destination_name">Destination Name</p>
                        <p class="heading">Type <span id="summary_type" class="destination-info">type</span></p>
                        <p class="heading">District <span id="summary_district" class="destination-info">district</span></p>
                        <p class="heading">Country <span id="summary_country" class="destination-info">country</span></p>
                        <p class="heading">Latitude <span id="summary_latitude" class="destination-info">latitude</span></p>
                        <p class="heading">Longitude <span id="summary_longitude" class="destination-info">longitude</span></p>
                        <p class="heading">Owner <span id="summary_user" class="destination-info">user.username</span></p>
                        @if(canModify) {
                            <a data-toggle="modal" data-target="#editDestinationModal">
                                @* TODO link this to the edit destination modal ?!  *@
                                <span class="destination-button" style="float: left; padding-top: 15px; padding-bottom: 0px;">Edit Destination</span>
                            </a>
                            <a data-toggle="modal" data-target="#deleteDestinationModal">
                                <span class="destination-button" style="float: left; padding-top: 10px; color: red; clear: left">Delete Destination</span>
                            </a>
                        }
                    </div>
                </div>
            </div>
            <div class="col-12 col-md-9">
                @* Body Content *@
                <div class="destination-main">
                    <div>
                    @modules.gallery(loggedUser, canModify)
                    </div>
                </div>
            </div>
        </div>
    </body>

    @* Delete Destination Modal *@
    <div class="modal fade" id="editDestinationModal" role="dialog" data-show="true" aria-labelledby="modalLabel" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header text-center">
                    <h4 class="modal-title w-100 font-weight-bold">Edit Destination</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div>
                    <form id="editDestinationForm">
                        <div class="modal-body mx-3">
                            <div>Name
                                <em class="fas prefix grey-text"></em>
                                <input type="text" name="name" class="form-control validate" required>
                                <label id="nameError" class="error-messages"></label>
                            </div>

                            <div>Type
                                <em class="fas prefix grey-text"></em>
                                <input type="text" name="_type" class="form-control validate" required>
                                <label id="_typeError" class="error-messages"></label>
                            </div>

                            <div>District
                                <em class="fas prefix grey-text"></em>
                                <input type="text" name="district" class="form-control validate" required>
                                <label id="districtError" class="error-messages"></label>
                            </div>

                            <div>Latitude
                                <em class="fas prefix grey-text"></em>
                                <input type="number" name="latitude" class="form-control validate" pattern="[0-9]+([\.,][0-9]+)?" step="any" required>
                                <label id="latitudeError" class="error-messages"></label>
                            </div>

                            <div>Longitude
                                <em class="fas prefix grey-text"></em>
                                <input type="number" name="longitude" class="form-control validate" pattern="[0-9]+([\.,][0-9]+)?" step="any" required>
                                <label id="longitudeError" class="error-messages"></label>
                            </div>

                            <div>Country
                                <em class="fas prefix grey-text"></em>
                                <select id="countryDropDown" name="countryId" class="form-control validate">
                                </select>
                                <label id="countryError" class="error-messages"></label>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer d-flex justify-content-center">
                    <button class="btn btn-popup" id="remove-all" data-dismiss="modal">
                        Cancel<em class="fas fa-paper-plane-o ml-1"></em>
                    </button>
                    <button class="btn btn-pop" onclick="editDestination(@destinationId, '@controllers.frontend.routes.DestinationController.index()')">
                        Confirm changes
                    </button>
                </div>
            </div>
        </div>
    </div>
    @* Delete Destination Modal *@
    <div class="modal fade" id="deleteDestinationModal" role="dialog" data-show="true" aria-labelledby="modalLabel" data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header text-center">
                    <h4 class="modal-title w-100 font-weight-bold">Delete Destination</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <br>
                <div>
                    <p align="center">Are you sure you want to delete this destination?</p>
                </div>
                <div class="modal-footer d-flex justify-content-center">
                    <button class="btn btn-popup" id="remove-all" data-dismiss="modal">
                        No<em class="fas fa-paper-plane-o ml-1"></em>
                    </button>
                    <button class="btn btn-danger" onclick="deleteDestination(@destinationId, '@controllers.frontend.routes.DestinationController.index()')">
                        Yes
                    </button>
                </div>
            </div>
        </div>
    </div>

}

@*Calling javascript functions for auto-populating the nationality and traveller type selection lists in the filter*@
<script type="text/javascript">
        fillCountryInfo("@controllers.backend.routes.DestinationController.getAllCountries()");
        populateDestinationDetails(@destinationId);
        src="@controllers.backend.routes.DestinationController.destinationRoutes()"
</script>